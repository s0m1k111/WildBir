@model ProductModel
@{
    ViewData["Title"] = Model.Name;
}

<div class="container mt-4">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Главная</a></li>
            <li class="breadcrumb-item"><a href="#">Категория</a></li>
            <li class="breadcrumb-item active" aria-current="page">@Model.Name</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-md-5">
            <div class="card mb-3">
                <img src="@Model.Image" class="card-img-top p-3" alt="@Model.Name">
            </div>
            <div class="d-flex overflow-auto">
                <img src="@Model.Image" class="img-thumbnail me-2" width="80" alt="Thumbnail">
                <img src="@Model.Image" class="img-thumbnail me-2" width="80" alt="Thumbnail">
                <img src="@Model.Image" class="img-thumbnail me-2" width="80" alt="Thumbnail">
            </div>
        </div>

        <div class="col-md-4">
            <h2 class="mb-3">@Model.Name</h2>

            <div class="d-flex align-items-center mb-3">
                <div class="rating me-2">
                    <i class="bi bi-star-fill text-warning"></i>
                    <i class="bi bi-star-fill text-warning"></i>
                    <i class="bi bi-star-fill text-warning"></i>
                    <i class="bi bi-star-fill text-warning"></i>
                    <i class="bi bi-star-half text-warning"></i>
                </div>
                <span class="text-muted small">12 отзывов</span>
            </div>

            <div class="bg-light p-3 mb-4 rounded">
                <div class="d-flex align-items-center mb-2">
                    <span class="text-danger fs-4 fw-bold me-2">@Model.Price ₽</span>
                    <span class="text-success small">В наличии</span>
                </div>

                <div class="d-flex mb-3">
                    <div class="me-3">
                        <button class="btn btn-outline-secondary btn-sm">-</button>
                        <span class="mx-2">1</span>
                        <button class="btn btn-outline-secondary btn-sm">+</button>
                    </div>
                    <button onclick="Cart(@Model.Id)" class="btn btn-danger flex-grow-1">Добавить в корзину</button>
                </div>

                <div class="d-flex small text-muted">
                    <div class="me-3">
                        <i class="bi bi-truck"></i>
                        <span>Доставка завтра</span>
                    </div>
                    <div>
                        <i class="bi bi-shop"></i>
                        <span>Самовывоз</span>
                    </div>
                </div>
            </div>

            <div class="mb-4">
                <h5 class="mb-3">Характеристики</h5>
                <table class="table table-sm">
                    <tr>
                        <td class="text-muted">Артикул</td>
                        <td>@Model.Id</td>
                    </tr>
                    <tr>
                        <td class="text-muted">Бренд</td>
                        <td>Wildberries</td>
                    </tr>
                    <tr>
                        <td class="text-muted">Цвет</td>
                        <td>Черный</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Доставка</h5>
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="delivery" id="courier" checked>
                            <label class="form-check-label" for="courier">
                                Курьером
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="delivery" id="pickup">
                            <label class="form-check-label" for="pickup">
                                Самовывоз
                            </label>
                        </div>
                    </div>

                    <h5 class="card-title">Оплата</h5>
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="payment" id="online" checked>
                            <label class="form-check-label" for="online">
                                Онлайн
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="payment" id="cash">
                            <label class="form-check-label" for="cash">
                                При получении
                            </label>
                        </div>
                    </div>

                    <button onclick="Cart(@Model.Id)" class="btn btn-danger w-100">Купить сейчас</button>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-12">
            <ul class="nav nav-tabs" id="productTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description" type="button" role="tab">Описание</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="specs-tab" data-bs-toggle="tab" data-bs-target="#specs" type="button" role="tab">Характеристики</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">Отзывы</button>
                </li>
            </ul>

            <div class="tab-content p-3 border border-top-0 rounded-bottom" id="productTabsContent">
                <div class="tab-pane fade show active" id="description" role="tabpanel">
                    <p>@Model.Name - это высококачественный товар от известного бренда. Подробное описание товара с указанием всех преимуществ и особенностей.</p>
                    <p>Материалы: 100% хлопок</p>
                    <p>Страна производства: Китай</p>
                </div>

                <div class="tab-pane fade" id="specs" role="tabpanel">
                    <table class="table">
                        <tr>
                            <td width="30%">Артикул</td>
                            <td>@Model.Id</td>
                        </tr>
                        <tr>
                            <td>Бренд</td>
                            <td>Wildberries</td>
                        </tr>
                        <tr>
                            <td>Цвет</td>
                            <td>Черный</td>
                        </tr>
                        <tr>
                            <td>Вес</td>
                            <td>0.5 кг</td>
                        </tr>
                    </table>
                </div>

                <div class="tab-pane fade" id="reviews" role="tabpanel">
                    <div class="d-flex align-items-center mb-3">
                        <div class="rating me-2">
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star-half text-warning"></i>
                        </div>
                        <span class="fw-bold">4.5 из 5</span>
                        <span class="text-muted ms-2">(12 отзывов)</span>
                    </div>

                    <div class="review mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="fw-bold">Иван Иванов</span>
                            <span class="text-muted small">12.05.2023</span>
                        </div>
                        <div class="rating mb-2">
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star-fill text-warning"></i>
                        </div>
                        <p>Отличный товар, соответствует описанию. Быстрая доставка.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function Cart(Id) {
        fetch(`/Home/IdProduct/?id=${Id}`)
            .then(response => {
                if (response.ok) {
                    // Show success notification
                    const toast = document.createElement('div');
                    toast.className = 'position-fixed bottom-0 end-0 p-3';
                    toast.innerHTML = `
                        <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                            <div class="toast-header bg-success text-white">
                                <strong class="me-auto">Успешно</strong>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
                            </div>
                            <div class="toast-body">
                                Товар добавлен в корзину
                            </div>
                        </div>
                    `;
                    document.body.appendChild(toast);

                    // Remove toast after 3 seconds
                    setTimeout(() => {
                        toast.remove();
                    }, 3000);
                }
            });
    }
</script>

<style>
    .rating {
        color: #ffc107;
    }

    .breadcrumb {
        background-color: transparent;
        padding: 0;
    }

    .nav-tabs .nav-link {
        color: #333;
    }

        .nav-tabs .nav-link.active {
            color: #f84147;
            font-weight: bold;
        }

    .toast {
        z-index: 9999;
    }
</style>